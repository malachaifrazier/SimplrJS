(function(d){Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=a<0?this.length+a:a;return this.push.apply(this,c)};window.Simplr={Config:{Data:{ConsoleActive:!1},mToggleConsole:function(a){d("#_simplr_core_console").remove();Simplr.Config.Data.ConsoleActive=!1;if(a)try{if(typeof window.console!="undefined"&&typeof window.console.group!="undefined")d(function(){d("body").append('<p id="_simplr_core_console" style="margin: 0; text-align: center; position: fixed; top: 0; width: 100%; left: 0; border-bottom: 1px solid #000; color: #fff; font-weight: bold; background-color: #f00; padding: 5px; font-size: 11px; opacity: .75;">[console]: Console Messaging Active</p>'); d("#_simplr_core_console").mouseover(function(){d(this).slideUp()}).mouseout(function(){d(this).delay(3E3).slideDown()})}),Simplr.Config.Data.ConsoleActive=!0}catch(b){}return Simplr.Config.Data.ConsoleActive}}};Simplr.Browser={};(function(){var a={UserAgent:""};Simplr.Browser={mAddressBarHeight:function(){var a=Simplr.Browser.mDevice();return a=="iPhone"||a=="iPod"||a=="iPad"?60:0},mDevice:function(){if(a.UserAgent.match(/iPhone/i))return"iPhone";else if(a.UserAgent.match(/iPod/i))return"iPod";else if(a.UserAgent.match(/iPad/i))return"iPad"; else if(a.UserAgent.match(/Android/i))return"Android";return"other"},mLocalStorageCapable:function(){return Simplr.Core.Util.mHasLocalStorage()},mSetUserAgent:function(b){a.UserAgent=b},mTouchCapable:function(){var a=Simplr.Browser.mDevice();return a=="iPhone"||a=="iPod"||a=="iPad"||a=="Android"}};Simplr.Browser.mSetUserAgent(navigator.userAgent)})();Simplr.Cache={};(function(){Simplr.Cache={mExpire:function(a){Simplr.Core.Util.mHasLocalStorage()&&(localStorage.removeItem(a),localStorage.removeItem(a+ "_data"));return null},mGet:function(a){a=d.extend({key:"",identifier:""},a);if(Simplr.Core.Util.mHasLocalStorage()&&a.key!=""){var b=localStorage.getItem(a.key);if(b!=null&&(b=b.split("|"),b.length==2&&b[0]==a.identifier))if((new Date).getTime()<=parseInt(b[1],10))return localStorage.getItem(a.key+"_data");else Simplr.Cache.mExpire(a.key)}return null},mSet:function(a){a=d.extend({key:"",identifier:"",data:"",freshness:6E5},a);Simplr.Core.Util.mHasLocalStorage()&&a.key!=""&&(localStorage.setItem(a.key, a.identifier+"|"+((new Date).getTime()+a.freshness)),localStorage.setItem(a.key+"_data",a.data));return a.data}}})();Simplr.Controller={};(function(a,b,c){function f(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e="hashchange",d=document,h,j=a.event.special,i=d.documentMode,l="on"+e in b&&(i===c||i>7);a.fn[e]=function(a){return a?this.bind(e,a):this.trigger(e)};a.fn[e].delay=50;j[e]=a.extend(j[e],{setup:function(){if(l)return!1;a(h.start)},teardown:function(){if(l)return!1;a(h.stop)}}); h=function(){function h(){var c=f(),d=n(o);if(c!==o)p(o=c,d),a(b).trigger(e);else if(d!==o)location.href=location.href.replace(/#.*/,"")+d;j=setTimeout(h,a.fn[e].delay)}var i={},j,o=f(),q=function(a){return a},p=q,n=q;i.start=function(){j||h()};i.stop=function(){j&&clearTimeout(j);j=c};a.browser.msie&&!l&&function(){var b,c;i.start=function(){if(!b)c=(c=a.fn[e].src)&&c+f(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||p(f());h()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow, d.onpropertychange=function(){try{if(event.propertyName==="title")b.document.title=d.title}catch(a){}}};i.stop=q;n=function(){return f(b.location.href)};p=function(f,c){var h=b.document,i=a.fn[e].domain;if(f!==c)h.title=d.title,h.open(),i&&h.write('<script>document.domain="'+i+'"<\/script>'),h.close(),b.location.hash=f}}();return i}()})(jQuery,this);(function(){var a={CRUD:{view:!0,"new":!0,update:!0,"delete":!0},Commands:{},Bases:{}};Simplr.Controller={mAddBases:function(b){for(var b=d.isArray(b)? b:[b],c=0,f=b.length;c<f;c++)a.Bases[b[c]]=1},mAddCommands:function(b){for(var c in b){var f=d.extend({route:[],callback:function(){}},b[c]),e=f.route.join("_");if(e!="")a.Commands[e]=f.callback}},mExecute:function(b){var c=b.route.join("_");try{a.Commands[c](b)}catch(f){}},mGetCommands:function(){return a.Commands},mGetBases:function(){return a.Bases},mRoute:function(b){b={route:[],url:b,base:"",resources:{},action:"",parameters:{}};if(b.url[0]=="#")b.url=b.url.substring(1);if(b.url[0]=="!")b.url= b.url.substring(1);var c=b.url.split("?"),f=c[0],e;for(e in a.Bases)if((c[0]=c[0].replace(e,""))!=f){b.base=e;b.route.push(e);break}c[0]=c[0].split("/");b.action=c[0][c[0].length-1];b.action=a.CRUD[b.action]?b.action:"view";e=!0;for(var f="",g=0,h=c[0].length-1;g<h;g++)c[0][g]!=""&&(e?(f=c[0][g],b.route.push(f),b.resources[f]=""):b.resources[f]=c[0][g],e=!e);if(c[1]){c=c[1].split("&");e=0;for(f=c.length;e<f;e++)g=c[e].split("="),b.parameters[g[0]]=d.trim(g[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g, "&gt;").replace(/"/g,"&quot;"))}b.route.push(b.action);return b},mRouteAndExecute:function(a){Simplr.Controller.mExecute(Simplr.Controller.mRoute(decodeURI(a)))}};d(function(){d(window).hashchange(function(){window.location.hash!=""&&Simplr.Controller.mRouteAndExecute(window.location.hash)})})})();Simplr.Conversion={};var m;m||(m={});(function(){function a(a){return a<10?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var f=j[a];return typeof f==="string"?f:"\\u"+ ("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,f){var e,j,o,q,p=d,n,k=f[a];k&&typeof k==="object"&&typeof k.toJSON==="function"&&(k=k.toJSON(a));typeof i==="function"&&(k=i.call(f,a,k));switch(typeof k){case "string":return b(k);case "number":return isFinite(k)?String(k):"null";case "boolean":case "null":return String(k);case "object":if(!k)return"null";d+=h;n=[];if(Object.prototype.toString.apply(k)==="[object Array]"){q=k.length;for(e=0;e<q;e+=1)n[e]=c(e,k)||"null"; o=n.length===0?"[]":d?"[\n"+d+n.join(",\n"+d)+"\n"+p+"]":"["+n.join(",")+"]";d=p;return o}if(i&&typeof i==="object"){q=i.length;for(e=0;e<q;e+=1)typeof i[e]==="string"&&(j=i[e],(o=c(j,k))&&n.push(b(j)+(d?": ":":")+o))}else for(j in k)Object.prototype.hasOwnProperty.call(k,j)&&(o=c(j,k))&&n.push(b(j)+(d?": ":":")+o);o=n.length===0?"{}":d?"{\n"+d+n.join(",\n"+d)+"\n"+p+"}":"{"+n.join(",")+"}";d=p;return o}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())? this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, d,h,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof m.stringify!=="function")m.stringify=function(a,f,b){var e;h=d="";if(typeof b==="number")for(e=0;e<b;e+=1)h+=" ";else typeof b==="string"&&(h=b);if((i=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})};if(typeof m.parse!=="function")m.parse=function(a,b){function c(a,f){var e,d,g=a[f];if(g&&typeof g==="object")for(e in g)Object.prototype.hasOwnProperty.call(g, e)&&(d=c(g,e),d!==void 0?g[e]=d:delete g[e]);return b.call(a,f,g)}var e,a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof b==="function"?c({"":e},""):e;throw new SyntaxError("JSON.parse");}})();Simplr.Conversion= {mObjectToJSONString:function(a,b,c){return m.stringify(a,b,c)},mJSONStringToObject:function(a,b){return m.parse(a,b)}};Simplr.Cookie={};Simplr.Cookie={mGet:function(a){a=d.extend({name:""},a);if(document.cookie.length>0&&!Simplr.Core.Util.mEmpty(a.name)&&(a=document.cookie.match("(^|;) ?"+a.name+"=([^;]*)(;|$)")))return decodeURIComponent(a[2]);return null},mSet:function(a){a=d.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},a);if(!Simplr.Core.Util.mEmpty(a.name)){var b= a.name+"="+encodeURIComponent(a.value);if(!Simplr.Core.Util.mEmpty(a.expireDays)){var c=new Date;c.setTime(c.getTime()+a.expireDays*864E5);b+="; expires="+c.toUTCString()}b+=!Simplr.Core.Util.mEmpty(a.path)?"; path="+a.path:"";b+=!Simplr.Core.Util.mEmpty(a.domain)?"; domain="+a.domain:"";b+=a.secure?"; secure":"";document.cookie=b;return!0}return!1},mExpire:function(a){return Simplr.Cookie.mSet(d.extend({name:"",expireDays:-1},a))}};Simplr.Core={};(function(){function a(b){if(d.isArray(b.message)){console.group(b.group); for(var c=0,f=b.message.length;c<f;c++){var e=d.extend(Simplr.Core.Console.mGetMessageTemplate(),b.message[c]);a(e)}}else console.group(b.message),console.log(b.data);console.groupEnd()}Simplr.Core.Console={mGetMessageTemplate:function(){return{group:"",message:"",data:""}},mMessage:function(b){Simplr.Config.Data.ConsoleActive&&(b=d.extend(Simplr.Core.Console.mGetMessageTemplate(),b),a(b))}}})();(function(){function a(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g, "&quot;")}function b(a,e){if(typeof a==typeof e){if(typeof a=="object"){if(d.isArray(a)){if(a.length==e.length){for(var c=0,h=a.length;c<h;c++)if(!b(a[c],e[c]))return!1;return!0}}else{for(c in a)if(!b(a[c],e[c]))return!1;var j=h=0;for(c in a)h++;for(c in e)j++;return h==j}return!1}return a==e}return!1}var c=typeof localStorage=="undefined"?!1:!0;Simplr.Core.Util={mEmpty:function(a){var c=typeof a;if(c!="undefined"&&a!=null){if(c=="object"){if(d.isArray(a))return a.length==0;return d.isEmptyObject(a)}return d.trim(a)== ""}return!0},mEqual:function(a){if(!Simplr.Core.Util.mEmpty(a)&&d.isArray(a)){for(var c=!0,g=0,h=a.length;g<h;g++)b(a[0],a[g])||(c=!1,g=h);return c}return!0},mGetUrlParameter:function(c){var b=window.location.search;if(Simplr.Core.Util.mEmpty(b))return null;else{for(var g={},b=b.substring(1).split("&"),h=0,j=b.length;h<j;h++){var i=b[h].split("=");g[i[0]]=d.trim(a(decodeURIComponent(i[1])))}return Simplr.Core.Util.mEmpty(c)?g:(c=g[c],typeof c=="undefined"?null:c)}},mHasLocalStorage:function(){return c}}})(); (function(){var a={};Simplr.Core.Ui={mElementInfo:function(a){var a=d.extend({selector:"body"},a),c=d(a.selector).eq(0),a=[c.width(),c.height()],c=c.offset(),c=[c.left,c.top];return{offsets:c,dimensions:a}},mWindowInfo:function(){var a={};a.offsets=typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft|| document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0];a.dimensions=[d(window).width(),d(window).height()];return a},Widget:{mGenerateWidgetID:function(){var b=Math.floor(Math.random()*1E7);return Simplr.Core.Util.mEmpty(a[b])?(a[b]=!0,b):Simplr.Core.Ui.Widget.mGenerateWidgetID()}}}})();(function(a){function b(a,c){var b=c,d;for(d in a)b=b.replace(RegExp("\\$\\["+d+"\\]","g"),escape(a[d]));return unescape(b)}var c={codes:{eEmpty:"$[label] is empty.", eMissingValidator:"Missing Validator"},codeResultsTemplate:{success:[],error:[]},defaultCodeMessage:"$[label] is UNDEFINED",ruleResultsTemplate:{valid:!0,successCodes:[],errorCodes:[]},validators:{missingvalidator:function(){return a.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},notempty:function(c){var b=a.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate());if(typeof c!="undefined"&&c!=null)if(typeof c=="string")b.valid=a.trim(c)!= "";else if(a.isArray(c))b.valid=c.length!=0;else if(typeof c=="object")b.valid=!a.isEmptyObject(c);b.valid||b.errorCodes.push("eEmpty");return b}},validationResultsTemplate:{data:"",valid:!0,codes:{}}};Simplr.Core.Validation={mAddCodes:function(b){a.extend(c.codes,b)},mAddValidators:function(b){a.extend(c.validators,b)},mGetCodes:function(){return c.codes},mGetCodeMessage:function(a,e){if(c.codes[a]!=void 0)return b({label:e},c.codes[a]);return b({label:a},c.defaultCodeMessage)},mGetRuleResultsTemplate:function(){return a.extend(!0, {},c.ruleResultsTemplate)},mGetValidators:function(){return c.validators},mValidate:function(b){var b=a.extend(!0,{},c.validationResultsTemplate,{data:a.extend(!0,{},b)}),e;for(e in b.data){var d=b.data[e];b.codes[e]=a.extend(!0,{},c.codeResultsTemplate);for(var h=0,j=d.rules.length;h<j;h++){var i=d.rules[h],l=a.extend(!0,{},c.ruleResultsTemplate),l=c.validators[i]?c.validators[i](d.value):c.validators.missingvalidator(d.value),i=e,r=b;r.codes[i].success=r.codes[i].success.concat(l.successCodes); r.codes[i].error=r.codes[i].error.concat(l.errorCodes);if(!l.valid)r.valid=!1}b.codes[e].error.length==0&&b.codes[e].success.length==0&&delete b.codes[e]}return b}}})(jQuery);Simplr.Core.Validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.", eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});Simplr.Core.Validation.mAddValidators({missingvalidator:function(){return d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(a){a= d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)});a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid||a.errorCodes.push("eDinersClub"); return a},discover:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)});a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var b=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate());if(d.isArray(a))for(var c= 0,f=a.length;c<f;c++)if(!Simplr.Core.Util.mEqual([a[0],a[c]]))b.valid=!1,c=f;b.valid||b.errorCodes.push("eEqual");return b},mastercard:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var b=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate());if(typeof a!="undefined"&&a!=null)if(typeof a=="string")b.valid=d.trim(a)!="";else if(d.isArray(a))b.valid= a.length!=0;else if(typeof a=="object")b.valid=!d.isEmptyObject(a);b.valid||b.errorCodes.push("eEmpty");return b},number:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid||a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a=d.extend(!0,{}, Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=d.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}});Simplr.Form={};(function(){var a={Classes:{FormEntry:"formEntry",FormError:"formError",FieldError:"errorField",TextError:"errorText",TextInformation:"informationText"},DefaultRules:["notempty"], DefaultLabel:"_LABEL_",Rules:{},Labels:{}};Simplr.Form={mAddValidators:function(a){Simplr.Core.Validation.mAddValidators(a)},mGetValidators:function(){return Simplr.Core.Validation.mGetValidators()},mAddCodes:function(a){Simplr.Core.Validation.mAddCodes(a)},mGetCodes:function(){return Simplr.Core.Validation.mGetCodes()},mAddLabelAssociation:function(b){d.extend(a.Labels,b)},mAddValidationAssociation:function(b){d.extend(a.Rules,b)},mGetValues:function(a){var c={};d("input[type='checkbox']",a).each(function(){c[d(this).attr("name")]= d(this).is(":checked")?d(this).val()!="on"?d(this).val():!0:!1});d("input[type='text'], input[type='password'], input[type='hidden'], input[type='radio']:checked, select, textarea",a).each(function(){c[d(this).attr("name")]=d(this).val()});return c},mValidateValuesAndRender:function(b,c){var f={},e;for(e in c){for(var g={value:c[e],label:a.Labels[e]?a.Labels[e]:a.DefaultLabel,rules:[]},h=0,j=a.DefaultRules.length;h<j;h++)g.rules.push(a.DefaultRules[h]);try{a.Rules[e](g.rules)}catch(i){}f[e]=g}f=Simplr.Core.Validation.mValidate(f); e=a.Classes;d("."+e.FormError+",."+e.FieldError,b).filter("._simplr").removeClass(e.FormError).removeClass(e.FieldError);d("."+e.TextInformation+",."+e.TextError,b).filter("._simplr").remove();for(var l in f.codes){h=f.codes[l];g="";for(h=[h.error,h.success];;){h=h[0];for(j=h.length;0<j;){g+='<p class="'+e.TextError+' _simplr">'+Simplr.Core.Validation.mGetCodeMessage(h[0],f.data[l].label)+"</p>";break}break}d("[name='"+l+"']:first",b).addClass(e.FieldError+" _simplr").closest("."+e.FormEntry).addClass(e.FormError+ " _simplr").append(g)}return f.valid}}})();Simplr.Layout={};var s=function(a,b){typeof a=="string"&&(a=document.getElementById(a));if(a.nodeType!=1)return!1;var c=a.childNodes,d="";if(!b)for(var e=0;e<c.length;e++)if(c[e].nodeType==3){var g=c[e].nodeValue,g=g.replace(/</g,"&lt;"),g=g.replace(/>/g,"&gt;");d+=g}else if(c[e].nodeType==8)d+="<\!--"+c[e].nodeValue+"--\>";else{d+="<"+c[e].nodeName.toLowerCase();for(var g=c[e].attributes,h=0;h<g.length;h++){var j=g[h].nodeName.toLowerCase(),i=g[h].nodeValue; j=="style"&&c[e].style.cssText?d+=' style="'+c[e].style.cssText.toLowerCase()+'"':i&&j!="contenteditable"&&(d+=" "+j+'="'+i+'"')}d+=">"+s(c[e]);d+="</"+c[e].nodeName.toLowerCase()+">"}return d};(function(){function a(c){for(;d(".layout-component",c).size()>0;)a(d(".layout-component:eq(0)",c));var b={};b[c.attr("id").split("-")[1]]=s(c.get(0));Simplr.Layout.mAddComponents(b);c.remove()}var b={Components:{},GlobalTokens:{}};Simplr.Layout={mAddComponents:function(a){for(var f in a)b.Components[f]=d.trim(a[f].replace(/\n/g, "").replace(/\s{1,}/g," "))},mAssembleLayout:function(a){var b="";if(a&&a.component&&a.tokens)for(var e=d.isArray(a.tokens)?a.tokens:[a.tokens],g=0,h=e.length;g<h;g++){var j={},i;for(i in e[g]){var l=j,r=i,m;m=e[g][i];m=typeof m=="object"?Simplr.Layout.mAssembleLayout(m):m;l[r]=m}b+=Simplr.Layout.mReplaceTokens(j,Simplr.Layout.mGetComponent(a.component))}return b},mGetComponent:function(c){typeof b.Components[c]=="undefined"&&(d("#layout-"+c).size()>0?a(d("#layout-"+c)):b.Components[c]=null);return b.Components[c]}, mGetComponents:function(){return b.Components},mAddGlobalTokens:function(a){d.extend(b.GlobalTokens,a)},mReplaceTokens:function(a,f){if(f!=null){d.extend(a,b.GlobalTokens);for(var e in a)f=f.replace(RegExp("\\$\\["+e+"\\]","g"),escape(a[e]))}return unescape(f)}}})();Simplr.Trigger={};(function(){function a(a){var f={services:[],data:{envID:b.Env}};d.extend(!0,f,a.options);if(Simplr.Core.Util.mEmpty(f.services)){var e=[],g;for(g in b.Services)e.push(g);f.services=e}e=d.extend(Simplr.Core.Console.mGetMessageTemplate(), {group:"simplr.trigger: "+b.Env+" environment",message:[]});g=0;for(var h=f.services.length;g<h;g++){var j=f.services[g];d.isFunction(b.Services[j][a.type])&&b.Services[j].data.environmentIDs[b.Env]&&e.message.push({message:"["+j+"] "+a.type+" triggered.",data:b.Services[j][a.type](f.data)})}e.message.length>0&&Simplr.Core.Console.mMessage(e)}var b={Env:"_simplr",Services:{}};Simplr.Trigger={mAddServices:function(c){for(var f in c)b.Services[f]=d.extend({data:{environmentIDs:{}},onLoad:function(){}, onPage:function(){},onEvent:function(){},onTransaction:function(){}},c[f]),a({type:"onLoad",options:{services:[f]}})},mGetServices:function(){return b.Services},mSetEnvironment:function(a){b.Env=a},mOnPage:function(b){a({type:"onPage",options:d.extend({},b)})},mOnEvent:function(b){a({type:"onEvent",options:d.extend({},b)})},mOnTransaction:function(b){a({type:"onTransaction",options:d.extend({},b)})}}})();Simplr.Ui={Widget:{}};(function(){function a(a){var e=d("#"+a.id);e.size()==0?d("body").append('<div id="'+ a.id+'" style="position: absolute;"></div>'):(e.removeClass(b).removeClass(c),d(a.closeSelector).unbind("click.simplr.layer.destroy."+a.id));var e=d("#"+a.id),g=!(a.xPos!=null&&a.yPos!=null);g?(a.keepCentered&&e.addClass(c),Simplr.Ui.Layer.mCenter(a.id)):e.css("left",a.xPos+"px").css("top",a.yPos+"px");e.html(a.defaultContent);g&&Simplr.Ui.Layer.mCenter(a.id);d(a.closeSelector).bind("click.simplr.layer.destroy."+a.id,function(b){b.preventDefault();Simplr.Ui.Layer.mDestroy({id:a.id,closeSelector:a.closeSelector})})} var b="_simplr_centerLayer",c="_simplr_keepCenterLayer";Simplr.Ui.Layer={mCenter:function(a){if(!Simplr.Core.Util.mEmpty(a)){var a=d("#"+a),e=a.width(),g=a.height(),h=Simplr.Core.Ui.mWindowInfo(),j=0,j=(h.dimensions[0]-e)/2,j=j<0?20:j;j+=h.offsets[0];var i=0,i=(h.dimensions[1]-g)/2,i=i<0?20:i;i+=h.offsets[1];(e>h.dimensions[0]||g>h.dimensions[1])&&a.hasClass(c)&&a.removeClass(c).addClass(b);a.css("top",i+"px").css("left",j+"px")}},mCreate:function(b){var c=d.extend({ajax:null,callback:null,closeSelector:"#_simplr_layerClose", defaultContent:"",id:"_simplr_layer",isOverlay:!1,keepCentered:!1,xPos:null,yPos:null},b);if(c.isOverlay)c.id=c.id=="_simplr_layer"?"_simplr_overlay":c.id,c.closeSelector=c.closeSelector=="#_simplr_layerClose"?"#_simplr_overlayClose":c.closeSelector,c.xPos=0,c.yPos=0;a(c);if(c.ajax!=null){var g=c.ajax.success;c.ajax.success=function(b,f){c.defaultContent=b;a(c);d.isFunction(g)&&g(b,f)};d.ajax(c.ajax)}else d.isFunction(c.callback)&&c.callback();c.isOverlay&&d("#"+c.id).css({position:"fixed",width:"100%", height:"100%"})},mDestroy:function(a){a=d.extend({id:"_simplr_layer",closeSelector:"#_simplr_layerClose"},a);Simplr.Core.Util.mEmpty(a.id)||(d("#"+a.id).remove(),d(a.closeSelector).unbind("click.simplr.ui.layer.destroy."+a.id))}};d(function(){d(window).bind("resize.simplr.ui.layer",function(){d("."+c+",."+b).each(function(a,e){d(e).addClass(c).removeClass(b);Simplr.Ui.Layer.mCenter(d(e).attr("id"))})}).bind("scroll.simplr.ui.layer",function(){d("."+c).each(function(a,b){Simplr.Ui.Layer.mCenter(d(b).attr("id"))})})})})(); Simplr.Ui.mNewBrowserWindow=function(a){a=d.extend({url:"",width:500,height:500,name:"_simplr_newBrowserWindow"},a);if(!Simplr.Core.Util.mEmpty(a.url)){var b="width="+a.width+",height="+a.height,c=a.url,f=a.name;delete a.url;delete a.width;delete a.height;delete a.name;for(var e in a)b+=","+e+"="+a[e];e=window.open(c,f,b);e!=null&&e.focus()}};(function(){function a(a){this.data=d.extend({animateSpeed:200,containerSelector:"#_simplr_widget_trackableScrollingElement_container",elementSelector:"#_simplr_widget_trackableScrollingElement_element", offset:10,refreshSpeed:500,tolerance:10},a);this.data._PRIVATE={evtString:"scroll.simplr.widget.trackableScrollingElement."+Simplr.Core.Ui.Widget.mGenerateWidgetID(),timeout:null,previousOffset:0};this.destroy();var c=this;d(window).bind(c.data._PRIVATE.evtString,function(){clearTimeout(c.data._PRIVATE.timeout);c.data._PRIVATE.timeout=setTimeout(function(){var a=d(c.data.containerSelector).eq(0),b=a.children(c.data.elementSelector).eq(0);if(a.is(":visible")&&b.is(":visible")){var a=Simplr.Core.Ui.mElementInfo({selector:a}), g=Simplr.Core.Ui.mElementInfo({selector:b}),h=Simplr.Core.Ui.mWindowInfo(),j=h.offsets[1]-c.data._PRIVATE.previousOffset<0;c.data._PRIVATE.previousOffset=h.offsets[1];var i=null,l=[g.offsets[1]-c.data.tolerance,g.offsets[1]+c.data.tolerance],m=[g.offsets[1]+g.dimensions[1]-c.data.tolerance,g.offsets[1]+g.dimensions[1]+c.data.tolerance];h.dimensions[1]>g.dimensions[1]&&(h.offsets[1]<l[0]||h.offsets[1]>l[1])?i=h.offsets[1]-a.offsets[1]+c.data.offset:j&&h.offsets[1]<l[0]?i=h.offsets[1]-a.offsets[1]+ c.data.offset:h.offsets[1]+g.dimensions[1]>m[1]&&(i=h.offsets[1]-a.offsets[1]-(g.dimensions[1]-h.dimensions[1])-c.data.offset);i!=null&&(i<0?i=0:i>a.dimensions[1]-g.dimensions[1]&&(i=a.dimensions[1]-g.dimensions[1]),b.stop().animate({marginTop:i},c.data.animateSpeed))}else b.css("margin-top",0)},c.data.refreshSpeed)})}Simplr.Ui.Widget.oTrackableScrollingElement=function(b){return new a(b)};a.prototype.reset=function(){d(this.data.elementSelector).eq(0).css("margin-top",0)};a.prototype.destroy=function(){this.reset(); d(window).unbind(this.data._PRIVATE.evtString)}})();Simplr.Util={};Simplr.Util={mEmpty:function(a){return Simplr.Core.Util.mEmpty(a)},mEqual:function(a){return Simplr.Core.Util.mEqual(a)},mGetUrlParameter:function(a){return Simplr.Core.Util.mGetUrlParameter(a)},mHasLocalStorage:function(){return Simplr.Core.Util.mHasLocalStorage()},mTruncateString:function(a){a=d.extend({string:"",size:5,postfix:"",smart:!0},a);if(a.string.length>a.size){var b=a.size-a.postfix.length-1,c=b+1;if(a.smart)for(;a.string.charAt(b)!= " "&&b>0;)b--;return a.string.substring(0,b==0?c:b+1)+a.postfix}return a.string}};Simplr.Validation={};Simplr.Validation={mAddCodes:function(a){Simplr.Core.Validation.mAddCodes(a)},mGetCodes:function(){return Simplr.Core.Validation.mGetCodes()},mAddValidators:function(a){Simplr.Core.Validation.mAddValidators(a)},mGetValidators:function(){return Simplr.Core.Validation.mGetValidators()},mGetRuleResultsTemplate:function(){return Simplr.Core.Validation.mGetRuleResultsTemplate()},mGetCodeMessage:function(a, b){return Simplr.Core.Validation.mGetCodeMessage(a,b)},mValidate:function(a){return Simplr.Core.Validation.mValidate(a)}};Simplr.View={};(function(){var a={};Simplr.View={mAddViews:function(b){for(var c in b){var f=d.extend(!0,{},{html:function(){return""},callback:function(){}},b[c]);a[c]=f}},mGetViews:function(){return a},mRender:function(b){b=d.extend({name:"",data:"",selector:""},b);d(b.selector).html(a[b.name].html(b.data));a[b.name].callback(b.selector,b.data)}}})()})(jQuery);